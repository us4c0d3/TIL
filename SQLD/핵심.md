# 핵심 정리

- 오라클에서 공백 문자 데이터는 NULL로 저장
- 오라클에서 DATE 산술연산 시 1은 하루(=24H=24\*60min=24\*60*60sec)
- DECODE 함수
  - DECODE(A, B, X, Y): A=B이면 X, A != B이면 Y
  - DECODE(A, B, X, C, Y, Z): A = B이면 X, A = C이면 Y, A!=B, A!=C이면 Z

### SQL 연산 순서

1. FROM
2. WHERE
3. GROUP BY
4. HAVING
5. SELECT
6. ORDER BY

#### SQL 분류

- DML: SELECT, INSERT, UPDATE, DELETE
- DDL: CREATE, DROP, ALTER, MODIFY
- TCL: ROLLBACK, COMMIT
- DCL: GRANT, REVOKE



### CONCAT

SQL Server

- SELECT col1 + col2 + col3 FROM table;

Oracle

- SELECT col1 || col2 || col3 FROM table;

> SELECT concat(col1, col2) FROM table; concat은 연산자 2개만 가능



### NULL 처리

  - NULLIF(A, B): 두 개의 값이 같으면 NULL, 다르면 A 반환
  - NVL(A, B): A가 NULL이면 B 반환, 아니면 NULL반환
  - NVL2(A, B, C): A가 NULL이 아니면 B반환, NULL이면 C반환
  - COALESCE(A, B): A와 B 둘 중 하나가 NULL이라면 NULL이 아닌 값 반환, 둘 다 NULL이라면 NULL반환, 둘 다 NULL이 아니라면 A 반환

### 순수관계연산자

  - SELECT
  - PROJECT
  - JOIN
  - DIVIDE

### NULL

- 산술 연산에서 null이 들어가게 되면 null 출력
- 조건절에 null이 들어가면 false 반환
- 집계함수에서 null은 데이터 대상에서 제외



### JOIN

- Cartesian Product(카테시안 곱): 일명 x 연산. 모든 조합이 레코드화 되서 출력

![](.\images\sql_joins.png)



### USING 절

- EQUI JOIN 시 동일한 컬럼명을 가질 때 사용 가능

- 이 경우 테이블 alias 사용 불가

- ```sql
  SELECT T.REGION_NAME, T.TEAM_NAME, STADIUM_ID, S.STADIUM_NAME
  FROM TEAM T INNER JOIN STADIUM S
  	USING (STADIUM_ID);
  ```

  ```sql
  SELECT T.REGION_NAME, T.TEAM_NAME, T.STADIUM_ID, S.STADIUM_NAME
  FROM TEAM T INNER JOIN STADIUM S
  	ON T.STADIUM_ID=S.STADIUM_ID;
  ```

- 위 두 쿼리문은 동일한 실행결과 제공



### UNION

- UNION: 중복 제거
- UNION ALL: 중복된 데이터를 제거하지 않고 모든 데이터 반환



### Oracle (+)

- Left Outer Join 또는 Right Outer Join을 의미

- `(+)`가 붙은 쪽이 데이터가 없어도 NULL을 채워서 결과에 포함

- ```sql
  SELECT A.ID A.NAME
  FROM A B
  WHERE A.ID = B.ID(+)
  AND B.atr1(+) = 'N'
  AND A.atr2 = 'Y'
  ```

  ```sql
  SELECT A.ID A.NAME
  FROM A LEFT OUTER JOIN B
  ON (A.ID = B.ID AND B.atr1 = 'N')
  WHERE A.atr2 = 'Y'
  ```

- 위 두 쿼리문은 동일한 실행결과 제공



### 연산자

- A BETWEEN B AND C: B <= A <= C
- A IN (1, 2, 3): A = 1 OR A = 2 OR A = 3
- A LIKE '_ble%': A의 값 중 2, 3, 4번째 값이 ble인 모든 데이터 출력
  - '_'는 1개 이상, '%'는 0개 이상



### row 개수

- Oracle - WHERE 옆에 ROWNUM
  - WHERE ROWNUM <= 3; 무조건 부등식; 3개만 나옴
- SQL Server - SELECT 옆에 TOP
  - SELECT TOP(3); 3개만 나옴
